<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% load static %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="{% static 'css/profile.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
    <title>KazTravel | Profile</title>
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.png' %}">
</head>
<body>

<nav class="navbar navbar-light navbar-expand-md fixed-top navbar-shrink py-3" id="mainNav">
    <div class="container"><a class="navbar-brand d-flex align-items-center" href="/"><span
            class="bs-icon-sm bs-icon-circle bs-icon-primary shadow d-flex justify-content-center align-items-center me-2 bs-icon"><svg
            xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16"
            class="bi bi-brightness-alt-high">
            <path
                    d="M8 3a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 3zm8 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zm-13.5.5a.5.5 0 0 0 0-1h-2a.5.5 0 0 0 0 1h2zm11.157-6.157a.5.5 0 0 1 0 .707l-1.414 1.414a.5.5 0 1 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm-9.9 2.121a.5.5 0 0 0 .707-.707L3.05 5.343a.5.5 0 1 0-.707.707l1.414 1.414zM8 7a4 4 0 0 0-4 4 .5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5 4 4 0 0 0-4-4zm0 1a3 3 0 0 1 2.959 2.5H5.04A3 3 0 0 1 8 8z">
            </path>
          </svg></span><span>KazTravel</span></a>
        <button data-bs-toggle="collapse" class="navbar-toggler"
                data-bs-target="#navcol-1"><span class="visually-hidden"></span><span
                class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navcol-1">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item"><a class="nav-link" href="/">Main page</a></li>
                <li class="nav-item"><a class="nav-link" href="/recommendations">Recommendations</a></li>
                <li class="nav-item"><a class="nav-link" href="/places">Places</a></li>
                <li class="nav-item"><a class="nav-link" href="/#features">Features</a></li>
                <li class="nav-item"><a class="nav-link" href="/rating">Rating</a></li>
            </ul>
           {% if not request.user.is_authenticated%}
            <a class="btn btn-primary shadow" role="button" href="/register">Sign up</a>
            {% else %}
            <a title="My profile" href="/profile"><img style="margin-left: 15px;" src="{{MEDIA_URL}}{{ profile.avatar.url}}" alt="" width="32" height="32" class="rounded-circle me-2"></a>
            <a title="My profile" href="/profile"><span class="nav-link active fw-bold">{{ request.user }}</span></a>
            <a class="btn btn-danger shadow" role="button" href="/logout">Log out</a>
            {% endif %}
        </div>
    </div>
</nav>

<section class="py-5 mt-5">
    <div class="container">
        <section class="py-4 py-xl-5">
            <div class="container">
                <h3 class="text-dark mb-4">Profile</h3>
                <div class="row mb-3">
                    <div class="col-lg-4">

                        <div class="card mb-3">
                            <div class="card-body text-center shadow"><img class="rounded-circle mb-3 mt-4"
                                                                           src="{{MEDIA_URL}}{{ profile.avatar.url}}"
                                                                           width="160" height="160" loading="lazy">
                                <div class="mb-3">
                                    <form method="post" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <p>
                                            <input id="id_image" type="file" class="border" style="" name="image" accept="image/png, image/gif, image/jpeg">
                                        </p>
                                        <button type="submit" name="upload_avatar" class="btn btn-primary btn-sm">Change Photo</button>
                                    </form>
                                </div>
                                 {% if message_ava %}
                                        <div class="alert alert-success" role="alert"><span><strong>{{message_ava}}</strong><br></span>
                                        </div>
                                        {% endif %}
                                <h6 class="text-black-50">We recommend uploading square images so that the avatar does
                                    not stretch
                                </h6>
                            </div>
                        </div>


                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                                <h6 class="text-success fw-bold m-0"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"
                      fill="currentColor" viewBox="0 0 16 16" class="bi bi-bookmark-star-fill">
                      <path fill-rule="evenodd"
                        d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5zM8.16 4.1a.178.178 0 0 0-.32 0l-.634 1.285a.178.178 0 0 1-.134.098l-1.42.206a.178.178 0 0 0-.098.303L6.58 6.993c.042.041.061.1.051.158L6.39 8.565a.178.178 0 0 0 .258.187l1.27-.668a.178.178 0 0 1 .165 0l1.27.668a.178.178 0 0 0 .257-.187L9.368 7.15a.178.178 0 0 1 .05-.158l1.028-1.001a.178.178 0 0 0-.098-.303l-1.42-.206a.178.178 0 0 1-.134-.098L8.16 4.1z">
                      </path>
                    </svg>&nbsp;Your Favorites</h6>
                            </div>
                            <ul class="list-group list-group-flush">


                                {% if favorites_data %}
                                {% for place in favorites_data %}
                                <li class="list-group-item">
                                    <div class="row align-items-center no-gutters">
                                        <div class="col me-2">
                                            <h6 class="mb-0"><strong>{{place.name}}</strong></h6><span class="text-xs">{{place.city}}, {{place.price}}</span>
                                        </div>
                                        <a class="col-auto" href="{% url 'place_detail' place.id %}">
                                            <button class="btn btn-outline-success btn-sm">Read</button>
                                        </a>
                                    </div>
                                </li>
                                {% endfor %}
                                {% else %}
                                <li class="list-group-item">
                                    <div class="row items-center no-gutters">
                                        <div class="col me-2">
                                            <h6 class="mb-0" style="color: #212121">Empty</h6>
                                        </div>
                                    </div>
                                </li>
                                {% endif %}
                            </ul>
                        </div>

                    </div>

                    <div class="col-lg-8">
                        <div class="row">
                            <div class="col">


                                <div class="card shadow mb-3">
                                    <div class="card-header py-3">
                                        <p class="text-primary m-0 fw-bold"><svg xmlns="http://www.w3.org/2000/svg" width="1em"
                          height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-person-circle">
                          <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"></path>
                          <path fill-rule="evenodd"
                            d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z">
                          </path>
                        </svg>&nbsp;User Settings</p>
                                    </div>
                                    <div class="card-body">
                                        {% if message_set %}
                                        <div class="alert alert-success" role="alert"><span><strong>{{message_set}}</strong><br></span>
                                        </div>
                                        {% endif %}
                                        <form method="post">
                                            {% csrf_token %}
                                            <div class="row">
                                                <div class="col">
                                                    <div class="mb-3"><label class="form-label" for="username"><strong>Username</strong></label>
                                                        <input class="form-control" type="text" id="username"
                                                               placeholder="user.name" name="username" disabled=""
                                                               value="{{ request.user }}"></div>
                                                </div>
                                                <div class="col">
                                                    <div class="mb-3"><label class="form-label" for="email"><strong>Email
                                                        Address</strong></label>
                                                        <input class="form-control" type="email" id="email"
                                                               placeholder="user@example.com" name="email" disabled=""
                                                               value="{{ request.user.email }}"></div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <div class="mb-3"><label class="form-label"><strong>First
                                                        Name</strong></label>
                                                        <input class="form-control" type="text" id="first_name"
                                                               placeholder="John" name="firstname"
                                                               value="{{profile.firstname}}"></div>
                                                </div>
                                                <div class="col">
                                                    <div class="mb-3"><label class="form-label"><strong>Last
                                                        Name</strong></label>
                                                        <input class="form-control" type="text" id="last_name"
                                                               placeholder="Doe" name="lastname"
                                                               value="{{profile.lastname}}"></div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <button class="btn btn-primary btn-sm" type="submit"
                                                        name="change_settings">Save Settings
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>

                                <div class="card shadow">
                                    <div class="card-header py-3">
                                        <p class="text-primary m-0 fw-bold"><svg xmlns="http://www.w3.org/2000/svg" width="1em"
                          height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-shield-lock-fill">
                          <path fill-rule="evenodd"
                            d="M8 0c-.69 0-1.843.265-2.928.56-1.11.3-2.229.655-2.887.87a1.54 1.54 0 0 0-1.044 1.262c-.596 4.477.787 7.795 2.465 9.99a11.777 11.777 0 0 0 2.517 2.453c.386.273.744.482 1.048.625.28.132.581.24.829.24s.548-.108.829-.24a7.159 7.159 0 0 0 1.048-.625 11.775 11.775 0 0 0 2.517-2.453c1.678-2.195 3.061-5.513 2.465-9.99a1.541 1.541 0 0 0-1.044-1.263 62.467 62.467 0 0 0-2.887-.87C9.843.266 8.69 0 8 0zm0 5a1.5 1.5 0 0 1 .5 2.915l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99A1.5 1.5 0 0 1 8 5z">
                          </path>
                        </svg>&nbsp;Change Password</p>
                                    </div>
                                    <div class="card-body">
                                        {% if message_pass %}
                                        <div class="alert alert-success" role="alert">
                                            <span><strong>{{message_pass}}</strong><br></span></div>
                                        {% endif %}
                                        <form method="post">
                                            {% csrf_token %}
                                            <div class="mb-3"></div>
                                            <div class="row">
                                                <div class="col">
                                                    <div class="mb-3">
                                                        <label class="form-label"><strong>Current password</strong><br></label>
                                                        <input class="form-control" type="password"
                                                               name="Current_password" placeholder="Password"></div>
                                                </div>
                                                <div class="col">
                                                    <div class="mb-3">
                                                        <label class="form-label"><strong>New
                                                            password</strong><br></label>
                                                        <input class="form-control" type="password"
                                                               placeholder="Password" name="New_password"></div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <button class="btn btn-primary btn-sm" type="submit"
                                                        name="change_password">Update
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</section>


 <footer class="bg-primary-gradient">
    <div class="container py-4 py-lg-5">
        <div class="row justify-content-center">
            <div class="col-sm-4 col-md-3 text-center text-lg-start d-flex flex-column item">
                <h3 class="fs-6 fw-bold">Main page</h3>
                <ul class="list-unstyled">
                    <li><a href="/#about_us">About us</a></li>
                    <li><a href="/#how_to_use_our_service">How to use our service?</a></li>
                    <li><a href="/#features">Features</a></li>
                    <li><a href="/#prices">Prices</a></li>
                </ul>
            </div>
            <div class="col-sm-4 col-md-3 text-center text-lg-start d-flex flex-column item">
                <h3 class="fs-6 fw-bold">Other</h3>
                <ul class="list-unstyled">
                    <li><a href="/places">Places</a></li>
                    <li><a href="/rating">Rating</a></li>
                    <li><a href="/recommendations">Recommendations</a></li>
                    <li><a href="/profile">My profile</a></li>
                </ul>
            </div>
            <div
                    class="col-lg-3 text-center text-lg-start d-flex flex-column align-items-center order-first align-items-lg-start order-lg-last item social">
                <div class="fw-bold d-flex align-items-center mb-2"><span
                        class="bs-icon-sm bs-icon-circle bs-icon-primary d-flex justify-content-center align-items-center bs-icon me-2"><svg
                        xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor"
                        viewBox="0 0 16 16"
                        class="bi bi-brightness-alt-high">
                <path
                        d="M8 3a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 3zm8 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zm-13.5.5a.5.5 0 0 0 0-1h-2a.5.5 0 0 0 0 1h2zm11.157-6.157a.5.5 0 0 1 0 .707l-1.414 1.414a.5.5 0 1 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm-9.9 2.121a.5.5 0 0 0 .707-.707L3.05 5.343a.5.5 0 1 0-.707.707l1.414 1.414zM8 7a4 4 0 0 0-4 4 .5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5 4 4 0 0 0-4-4zm0 1a3 3 0 0 1 2.959 2.5H5.04A3 3 0 0 1 8 8z">
                </path>
              </svg></span><span>KazTravel</span></div>
                <p class="text-muted copyright">Thanks to our service It will be easier for people to learn about interesting places in our vast country<br></p>
            </div>
        </div>
        <hr>
        <div class="text-muted d-flex justify-content-between align-items-center pt-3">
            <p class="mb-0">Copyright © 2022 KazTravel</p>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>